# Как спроектиировать, накодить и анимировать SVGs

Вы можете думать о Масштабируемой Векторной графике (Scalable Vector Graphics (SVG’s)) как о отзывчивой графике. SVG основан на XML-формате, которое позволяет вам создавать изображение ипользуя определенные теги и аттрибуты. Ваш код будет преобразован в картинку, которую вы можете менять в реальном времени в своём текстовом редакторе.
![](https://gist.github.com/anonymous/f14f41cf87ab5ad6a1bee198ee26c60a#file-japan-svg)

Это пример SVG. Если вы взглянете на этот код, то вы могли заметить, что он состоит из тегов и аттрибутов почти как в HTML-документе. Все они находятся внутри `<svg>` тега. Первое, это тег `<rect>` с черной чертой и белым заполнением фона. И внутри него эллипс (почти круг, но обратите внимание на `ry` и `rx` аттрибуты) который залит красным цветом.

Вы можете использовать SVG в вебе двумя путями. Вы можете использовать SVG файлы как аттрибут `src` в теге `<img>`. Итак, у вас выйдет `<img src=”japan.svg”>` как вы делали с PNG и JPEG файлами.

Но, более интересное использование (вы могли заметить, что теги имеют аттрибут `id` как в HTML) заключается в том, что мы можем напрямую вставить SVG в `<div>` внутри HTML. Мы можем стилизовать эти `div` как индивидуальные строительные блоки — или даже группы строительных блоков — так, как мы хотим. Мы можем использовать CSS, анимацию или даже добавить интерактивности с помощью JavaScript. Это то, что делает SVG одним из самых универсальных и крутых элементов в HTML прямо сейчас.

SVG бесконечно масштабируем, отзывчив, имеет очень маленький размер файла, инновация для следующего поколения экранов с неисчислимой плотностью пикселей, и может быть стилизован, анимирован, и интерактивным с использованием известных веб-технологий — а именно CSS и JavaScript.

## Векторные картинки против растровых

Растровые изображения состоят из пикселей чтобы создать целостную картинку. JPEG, GIF и PNG — самые распространённые типы растровых изображений.

Ратсровые изображения состоят из фиксированного числа пикслей, поэтому изменение размера с сохранением их плотности невозмжно. Вы могли заметить, что изменение размера таких изображений делает их зернистыми и размытыми. Всё это происходит из-за фиксированного количества пикселей.

Вот что происходит при увеличении растрового изображения:

![](https://cdn-images-1.medium.com/max/1600/0*DZ0Nry0tSMuKYFrL.gif)

С другой стороны, векторное изображение является гибким и не зависит от разрешения устройства. Они построены на использовании геометрических фигур — линии, прямоугольники, кривые — или последовательности команд. Вы можете изменять их атрибуты, такие как цвет, заливки и очертание.

Один из самых рапсространённых вариантов использования векторных изображений это иконки и маленькие анимированные иконки. Они будут чёткими даже на дисплеях с самой высокой плотностью пикселей, таких как новые 4k смартфоны.


Вот что происходит при увеличении векторного изображения:

![](https://cdn-images-1.medium.com/max/1600/0*9kjCwkCs_CIlJO9k.gif)

### SVG теги

####<svg>

Тег `<svg>` внедряет SVG-документ внутрь текущего документа, например HTML. Тег имеет свои координаты X и Y, высоту и ширину, и свой уникальный id.

Вот как он может выглядеть:

```html
<svg width="580" height="400" xmlns="http://www.w3.org/2000/svg">
```

####<g>

Тег `<g>` группирует элементы вместе и ведёт себя как контейнер для связанных графических элементов. Элемент `<g>` так же может содержать в себе другие элементы `<g>` которые вложены в него.

Вот пример тега `<g>`:

```html
<g> <title>background</title> <rect fill="#fff" id="canvas_background" height="402" width="582" y="-1" x="-1"/> <g display="none" overflow="visible" y="0" x="0" height="100%" width="100%" id="canvasGrid"> <rect fill="url(#gridpattern)" stroke-width="0" y="0" x="0" height="100%" width="100%"/> </g> </g>
```

####<rect>

Элемент `<rect>` представляет из себя основную фигуру SVG и представляет из себя прямоугольник. Элемент может иметь различные атрибуты, такие как координаты, высоту, ширину, цвет заливки, цвет обводки, и острые или закругленные углы.

Вот пример тега `<rect>`:

```html
<rect id="svg_1" height="253" width="373" y="59" x="107.5" stroke-width="1.5" stroke="#000" fill="#fff"/>
```

####<use>

Элемент `<use>` позволяет клонировать и использовать графические элементы SVG, в том числе другие элементы как `<g>`, `<rect>`, а также другие `<use>` элементы.

Вот пример тега `<use>`:

 ```html
 <text y="15">black</text> <use x="50" y="10" xlink:href="#Port" /> <text y="35">red</text> <use x="50" y="30" xlink:href="#Port"/> <text y="55">blue</text> <use x="50" y="50" xlink:href="#Port" style="fill:blue"/
 ```

####<path>

Элемент `<path>` определяет путь координат для фигуры. Код с использованием `<path>` может казаться магией, но не пугайтесь! Следующий код можно прочесть как:

1. “M150 o” — Переместись на (150,0)
2. “L75 200” — Нарисуй линию к (75,200) из последней позиции (которая была (150,0))
3. “L255 200” — Нарисуй линию к (225,200) из последней позиции (которая была (75,200))
4. 4. “Z” — Закрой цикл (рисуй к начальной точке)

Вам, наверное, не нужно учить этот код, так как он может быть сгенерирован в редакторе SVG, но будет здорово, если вы будете знать об этом.

Вот пример тега `<path>`:

```html
<svg height="210" width="400"> <path d="M150 0 L75 200 L225 200 Z" /> </svg>
```

####<symbol>

И наконец элемент `<symbol>` определяет символы которые могут быть использованы повторно. Эти символы могут быть использованы только когда использован элемент `<use>`.

Вот пример тега `<symbol>`:

```html
<svg> <symbol id="sym01" viewBox="0 0 150 110"> <circle cx="50" cy="50" r="40" stroke-width="8" stroke="red" fill="red"/> <circle cx="90" cy="60" r="40" stroke-width="8" stroke="green" fill="white"/> </symbol> <use xlink:href="#sym01" x="0" y="0" width="100" height="50"/> <use xlink:href="#sym01" x="0" y="50" width="75" height="38"/> <use xlink:href="#sym01" x="0" y="100" width="50" height="25"/> </svg>
```

##Создаём SVG

Есть множество доступных SVG редакторов, как Adobe Illustrator и Inkscape который бесплатен и с открытым исходным кодом. Поскольку SVG-файлы это текстовый XML, то в трудную минуту вы сможете написать код вручную.

Для этого примера я буду использовать простой [онлайн-редактор](http://editor.method.ac/) где вы сможете создавать SVG без необходимости установки чего-либо.

1. Для начала создайте круг.

![](https://gist.github.com/surbhioberoi/402de74ade872c68d1a57faf32677199#file-circle-svg)

2. Далее добавьте больше кругов и сохраните исходный код

![](https://gist.github.com/surbhioberoi/b31be8680f3eeda64c465559b9533001#file-circles-svg)

##CSS3 анимация

SVG может быть анимирован с помощью добавления *id* или *class* пути SVG в код и дальнейшей стилизацией его с помощью CSS3 как любой другой документ. Ниже приведен пример того как может быть анимирован SVG.

<iframe height='265' scrolling='no' src='//codepen.io/surbhioberoi/embed/OXOkKg/?height=265&theme-id=0&default-tab=html,result&embed-version=2' frameborder='no' allowtransparency='true' allowfullscreen='true' style='width: 100%;'>See the Pen <a href='http://codepen.io/surbhioberoi/pen/OXOkKg/'>circles.svg</a> by Surbhi Oberoi (<a href='http://codepen.io/surbhioberoi'>@surbhioberoi</a>) on <a href='http://codepen.io'>CodePen</a>.
</iframe>

 CSS анимация предлагает множество типов анимаций которые вы можете выбрать. Линейная анимация это ещё один крутой аттрубит SVG.

 Для следующего примера я написал текст “Hi, I am Surbhi” используя `pen` в редакторе. Затем я снова  использовал `keyframes` из CSS3 для анимации.


Обратите внимание, что каждый путь имеет уникальный ID. Это происходит потому, что задержка в анимации важна при анимации с более чем одним словом.

<iframe height='265' scrolling='no' src='//codepen.io/surbhioberoi/embed/XKgkgr/?height=265&theme-id=0&default-tab=html,result&embed-version=2' frameborder='no' allowtransparency='true' allowfullscreen='true' style='width: 100%;'>See the Pen <a href='http://codepen.io/surbhioberoi/pen/XKgkgr/'>name svg</a> by Surbhi Oberoi (<a href='http://codepen.io/surbhioberoi'>@surbhioberoi</a>) on <a href='http://codepen.io'>CodePen</a>.
</iframe>

##Анимационный тег <animate>

`<animate>` это тег анимации встроеный в сам элемент SVG. Он определяет как аттрибуты в элементах изменяются от начальных до конечных значений при указанной длительности анимации. Это используется для анимации свойств, которые не могут быть анимированы только с помощью CSS.

Общие элементы, которые анимируются этим тегом: цвет, движение и трансформация.

Тег `animate` вложен внутрь тега формы объекта, который должен быть анимирован. ЭОн не работает по координатам пути, но только внутри объекта тегов. Обратите внимание на дополнительный аттрибут. Это показывает, что анимации не переопределяют друг друга, но вместо этого работают одновременно.

Вот пример анимации SVG с помощью тега анимации в HTML5:

<iframe height='265' scrolling='no' src='//codepen.io/surbhioberoi/embed/qNVrYG/?height=265&theme-id=0&default-tab=html,result&embed-version=2' frameborder='no' allowtransparency='true' allowfullscreen='true' style='width: 100%;'>See the Pen <a href='http://codepen.io/surbhioberoi/pen/qNVrYG/'>animate-star</a> by Surbhi Oberoi (<a href='http://codepen.io/surbhioberoi'>@surbhioberoi</a>) on <a href='http://codepen.io'>CodePen</a>.
</iframe>

##Базовая анимация и интерактивность на JavaScript


поскольку SVG - это просто документ с тегами, то мы можем использовать JavaScript, чтобы взаимодействовать с каждым элементом SVG и добыть их селекторы (ID или class).

Помимо ванильного JS, есть множество JS-библиотек для анимации и взаимодействии с SVG: Vivus.js, Snap.svg, RaphaelJS и Velocity.js.


В следующем примере, я использовал библиотеку Vivus.js наряду с jQuery для достижения строковой анимации.

<iframe height='265' scrolling='no' src='//codepen.io/surbhioberoi/embed/pbdGwq/?height=265&theme-id=0&default-tab=html,result&embed-version=2' frameborder='no' allowtransparency='true' allowfullscreen='true' style='width: 100%;'>See the Pen <a href='http://codepen.io/surbhioberoi/pen/pbdGwq/'>javascript svg</a> by Surbhi Oberoi (<a href='http://codepen.io/surbhioberoi'>@surbhioberoi</a>) on <a href='http://codepen.io'>CodePen</a>.
</iframe>

##Почему нельзя использовать SVG для всех изображений?

Для SVG больше всего подходят изображения который могут быть выполнены с помощью нескольких геометрических фигур и формул. Хотя, в принципе, вы можете конвертировать ваши фотографии в SVG, но размер изображения будет несколько мегабайт, таким образом нарушая цель SVG экономить место. Будет лучше использовать SVG только для иконок, логотипов и небольших анимаций.

Вот что я создал, в то время как я всё больше узнавал о SVG, используя CSS и SVG, без различных библиотек. (Не судите!)
https://github.com/surbhioberoi/surbhi.me

![](https://cdn-images-1.medium.com/max/1600/0*wWFcDqQBEODlYS8x.gif)
